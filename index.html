<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
<script>
/* global nn */

const filename = 'electric-piano-chords.mp3'
let music
async function remix () {
  music.volume = nn.random(0.25, 0.5)
  music.currentTime = nn.random(0, music.duration)
  const time = nn.random(250, 500)
  await nn.sleep(time)
  remix()
}
function setup() {
  music = nn.create('audio')
  .set({
    src: filename,
    controls: true,
    loop: true
  })
  .addTo('body')
  .on('loadeddata', remix)
}
  
function animate (){
  requestAnimationFrame(animate);
  console.log(music.currentTime)
}
  
nn.on('load', setup)
nn.on('load', animate)
</script>